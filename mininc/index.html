<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Mini Incremental</title>
        <script>
            function add(last) {
                const button = document.createElement("button");
                button.last = last;
                button.count = 1n;
                button.textContent = "1";
                button.addEventListener("click", e => {
                    if (++button.count == 10n) {
                        add(e.target);
                    };
                    button.textContent = button.count;
                }, false);
                button.style.minWidth = "10ex";
                document.body.appendChild(button);
            }

            function refresh() {
                requestAnimationFrame(refresh);
                document.querySelectorAll("button").forEach(button => {
                    if (!button.last) return;
                    button.last.count += button.count;
                    button.last.textContent = button.last.count;
                });
            }
            refresh();

        </script>
    </head>

    <body onload="add()">

    </body>

</html>
